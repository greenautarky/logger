[agent]
  interval = "10s"
  round_interval = true
  collection_jitter = "0s"
  flush_interval = "10s"
  omit_hostname = false

# System metrics (very cheap)
[[inputs.cpu]]        # per-CPU off to reduce cardinality
  percpu = false
  totalcpu = true
[[inputs.mem]]
[[inputs.disk]]
  ignore_fs = ["tmpfs","devtmpfs","overlay"]
[[inputs.net]]
  interfaces = ["!veth*", "!docker*", "!tailscale*", "!cni*"]

# Docker metrics 
[[inputs.docker]]
   endpoint = "unix:///var/run/docker.sock"

# Send to InfluxDB v1
[[outputs.influxdb]]
  urls     = ["http://<INFLUX_HOST>:8086"]
  database = "metrics"
  username = "telegraf"
  password = "telegraf"
  retention_policy = ""
  write_consistency = "any"
  timeout = "5s"
